static void xrstor(struct vcpu *v)
{
    struct xsave_struct *ptr = v->arch.xsave_area;

    






    if ( (ptr->xsave_hdr.xstate_bv & XSTATE_FP) &&
         !(ptr->fpu_sse.fsw & 0x0080) &&
         boot_cpu_data.x86_vendor == X86_VENDOR_AMD )
        asm volatile ( "fnclex\n\t"        
                       "ffree %%st(7)\n\t" 
                       "fildl %0"          
                       : : "m" (ptr->fpu_sse) );

    asm volatile (
        ".byte " REX_PREFIX "0x0f,0xae,0x2f"
        :
        : "m" (*ptr), "a" (-1), "d" (-1), "D"(ptr) );
}