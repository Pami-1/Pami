inline
MOZ_MUST_USE bool
FromIPCSegment(const nsACString& aSpec, const ipc::StandardURLSegment& aSegment, nsStandardURL::URLSegment& aTarget)
{
    
    if (aSegment.length() == -1) {
        aTarget = nsStandardURL::URLSegment();
        return true;
    }

    
    if (NS_WARN_IF(aSegment.length() < -1)) {
        return false;
    }

    
    if (NS_WARN_IF(aSegment.position() + aSegment.length() > aSpec.Length())) {
        return false;
    }

    aTarget.mPos = aSegment.position();
    aTarget.mLen = aSegment.length();

    return true;
}