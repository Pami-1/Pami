void ParamTraits<GURL>::Write(Message* m, const GURL& p) {
   DCHECK(p.possibly_invalid_spec().length() <= content::kMaxURLChars);

  
  
  
  
  
  
  if (!p.is_valid()) {
    GURL reconstructed_url(p.possibly_invalid_spec());
    if (reconstructed_url.is_valid()) {
      DLOG(WARNING) << "GURL string " << p.possibly_invalid_spec()
                    << " (marked invalid) but parsed as valid.";
      m->WriteString(std::string());
      return;
    }
  }

   m->WriteString(p.possibly_invalid_spec());
 }